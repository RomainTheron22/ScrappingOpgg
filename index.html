<script>
  // Fonction pour attribuer une valeur numérique à chaque rang
  function rankValue(rankStr) {
    const tiers = {
      "Challenger": 900,
      "Grandmaster": 800,
      "Master": 700,
      "Diamond": 600,
      "Emerald": 500,
      "Platinum": 400,
      "Gold": 300,
      "Silver": 200,
      "Bronze": 100,
      "Iron": 0
    };
    const divisions = { "I": 4, "II": 3, "III": 2, "IV": 1 };
    const match = rankStr.match(/(Challenger|Grandmaster|Master|Diamond|Emerald|Platinum|Gold|Silver|Bronze|Iron)\s?(I{1,3}|IV|II)?/i);
    if (!match) return -1;
    const tier = tiers[match[1].charAt(0).toUpperCase() + match[1].slice(1).toLowerCase()] || 0;
    const division = divisions[match[2]] || 0;
    return tier + division;
  }

  fetch('rank.json')
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('players');
      // Trier les joueurs avant affichage
      data.player_stats.sort((a, b) => rankValue(b.rank) - rankValue(a.rank));
      data.player_stats.forEach(player => {
        const card = document.createElement('div');
        card.className = 'player-card';

        const shortPlayer = player.player;
        const shortRank = player.rank.slice;
        const shortPoints = player.points.slice(0, 5);
        const shortWinRate = player.win_rate.slice(0, 7);

        card.innerHTML = `
          <h2>${shortPlayer}</h2>
          <p class="player-stat"><strong>Rang :</strong> ${shortRank}</p>
          <p class="player-stat"><strong>Points :</strong> ${shortPoints}</p>
          <p class="player-stat"><strong>Win Rate :</strong> ${shortWinRate} (${player["win_%"]}%)</p>
        `;
        container.appendChild(card);
      });
    });
</script>
